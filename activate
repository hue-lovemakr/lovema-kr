deactivate () {
    # 1. PATH Î≥µÍµ¨
    if [ -n "${_OLD_GOPATH_PATH:-}" ] ; then
        export PATH="${_OLD_GOPATH_PATH:-}"
        unset _OLD_GOPATH_PATH
    fi

    # 2. GOROOT Î≥µÍµ¨
    if [ -n "${_OLD_GOROOT:-}" ] ; then
        export GOROOT="${_OLD_GOROOT:-}"
        unset _OLD_GOROOT
    else
        unset GOROOT
    fi

    # 3. ÌîÑÎ°¨ÌîÑÌä∏(PS1) Î≥µÍµ¨
    if [ -n "${_OLD_GO_PS1:-}" ] ; then
        export PS1="${_OLD_GO_PS1:-}"
        unset _OLD_GO_PS1
    fi

    # 4. Powerline ÎåÄÏùë Î≥ÄÏàò Ìï¥Ï†ú
    unset VIRTUAL_ENV
    unset VIRTUAL_ENV_PROMPT

    # Ïª§Îß®Îìú Ìï¥Ïãú Ï¥àÍ∏∞Ìôî
    hash -r 2> /dev/null

    if [ ! "${1:-}" = "nondestructive" ] ; then
        unset -f deactivate
    fi
    
		if [ -z "${NO_ECHO:-}" ] ; then
			echo "üõë Go Environment Deactivated."
		fi
}

# Í∏∞Ï°¥ ÌôúÏÑ±Ìôî ÌôòÍ≤Ω Ï¥àÍ∏∞Ìôî
deactivate nondestructive

# --- [ÌïµÏã¨ ÏàòÏ†ï Î∂ÄÎ∂Ñ] Ï†àÎåÄ Í≤ΩÎ°ú ÌååÏïÖ ---
# sourceÎ°ú Ïã§ÌñâÎê† Îïå BASH_SOURCE[0]Îäî Ïä§ÌÅ¨Î¶ΩÌä∏Ïùò Ï†ÑÏ≤¥ Í≤ΩÎ°úÎ•º Îã¥Í≥† ÏûàÏäµÎãàÎã§.

_SCRIPT_PATH="${BASH_SOURCE[0]}"
PROJECT_ROOT="$(cd "$(dirname "$_SCRIPT_PATH")" && pwd)"

export GO_VIRTUAL_ENV="$PROJECT_ROOT"
export GOPATH="$PROJECT_ROOT"

# --- ÌôòÍ≤Ω Î≥ÄÏàò ÏÑ§Ï†ï ---
_OLD_GOPATH_PATH="$PATH"

# Go SDK ÏúÑÏπò ÏÑ§Ï†ï (/opt/go ÏÇ¨Ïö© Í≥†Ï†ï)
export GOROOT="/opt/go"
export PATH="$GOROOT/bin:$PATH"
export GOPROXY="https://proxy.golang.org,direct"

# --- Powerline Î∞è ÌòÑÎåÄÏ†Å ÌîÑÎ°¨ÌîÑÌä∏ ÎåÄÏùë ---
export VIRTUAL_ENV="$PROJECT_ROOT"
export VIRTUAL_ENV_PROMPT="(go)"

if [ -z "${GO_VIRTUAL_ENV_DISABLE_PROMPT:-}" ] ; then
    _OLD_GO_PS1="${PS1:-}"
    export PS1="(go) ${PS1:-}"
fi

hash -r 2> /dev/null

if [ -z "${NO_ECHO:-}" ] ; then
    echo "========================================="
    echo "üêπ Go Environment Activated"
    echo "üìç GOPATH: $PROJECT_ROOT"
    echo "üìç GOROOT: $GOROOT"
    # echo "üåê Dev Mode: http://localhost:8080 (Default)"
    echo "========================================="
fi

#if [ -d "$PROJECT_ROOT/app" ]; then
#    cd "$PROJECT_ROOT/app"
#else
#    cd "$PROJECT_ROOT"
#fi
